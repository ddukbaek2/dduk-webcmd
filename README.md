# 컨버전 모델검수서버


## 개요
대상 모델 (FBX)이 컨버전에 적합한 대상인지 자동 검수하여 통과 및 반려시키는 서비스.   
altava.com의 크리에이터 업로드를 통해 올라간 모델이 알타바 API 서버에 등록되어 있으면 해당 모델을 다운로드 받고 검수 처리.   


## 서비스 플로우 설명
1. 서비스 시작시 슬랙의 컨버전 알리미 채널에 시작 알림 메시지 전달.
2. 매 일정 주기마다 알타바 API 서버로부터 검수 대기중인 모델이 존재하는지 모델 목록 요청.   
3. 모델이 존재할 경우 Cloudflare의 R2 스토리지로부터 모델을 다운로드 받아서 순차적 검수 처리.   
4. 모든 검수가 끝나면 각 모델별 검수 결과 (통과 or 반려) 를 알타바 API 서버에게 반영 요청.
5. 이후 슬랙의 컨버전 알리미 채널에 검수 결과를 알림 메시지로 전달.   
6. 다음 주기까지 대기.


## 서비스를 위한 최초 설치 및 실행 (Windows)
1. VC_redist x64 재배포 패키지 (2015~2022) 설치.   
2. Blender 4.0.2을(를) 기본 설치 위치로 지정하여 설치.   
3. Fork 기본 설치 위치로 지정하여 설치.   
4. 모델 검수 서버 프로젝트의 깃 레포지토리 다운로드 받기.   
5. 다운로드 받은 프로젝트 폴더에 .env 환경 변수 파일 넣기. (보안 상 별도 관리 대상)   
6. 윈도우 프롬프트를 열어서 다음을 입력.   
```batch
:: 예문.
:: 인수의 경우 현재 서비스 대상 설정. (dev or test or live)
cd /d {다운로드 받은 프로젝트 폴더}
run service dev
```
7. 재부팅시 자동으로 시작 될 수 있도록 위에서 입력한 명령을 시작 프로그램에 배치 파일로 만들어 저장하기.   
> 시작 프로그램 경로 : C:/Users/{사용자이름}/AppData/Roaming/Microsoft/Windows/Start Menu/Programs/Startup